<div class="account-binding-content">
  <form class="account-binding-form" [formGroup]="validateAccountBindingForm" *ngIf="!isVisible && !accountTreeVisible&&!googleSelectVisible&&!googleSelectLoading">
    <div class="account-binding-form-content">
      <ng-container *ngIf="!zhihuVisible">
        <nz-form-item class="account-form-item">
          <div class="form-label pull-left">
            <label><span class="redStart">*</span>广告主:</label>
          </div>
          <nz-form-control class="w260 ml8 pull-left">
            <nz-select class="w100p" [formControlName]="'cid'" [nzSize]="'default'" [nzDisabled]="account_id>0" [(ngModel)]="accountSetting.cid" [nzPlaceHolder]="'请选择广告主'" nzShowSearch>
              <nz-option
                *ngFor="let option of advertiserList"
                [nzLabel]="option.advertiser_name"
                [nzValue]="option.cid">
              </nz-option>
            </nz-select>
          </nz-form-control>
          <div class="ml8 pull-left">
            <div class='ant-form-item-explain' class="ml8" *ngIf="getFormControl('cid').dirty&&getFormControl('cid').hasError('required')"><i nz-icon nzType="exclamation-circle" nzTheme="outline"></i>请选择广告主</div>
          </div>
        </nz-form-item>
        <ng-container>
          <nz-form-item class="account-form-item channel">
            <div class="form-label pull-left">
              <label><span class="redStart">*</span>选择投放渠道:</label>
            </div>
            <nz-form-control class="w260 ml8 pull-left channelDiv">
              <nz-select class="w100p" [nzDisabled]="googleSelectVisible" [formControlName]="'channel_id'" [nzSize]="'default'" [(ngModel)]="channel_id" (ngModelChange)="changeChannel()" nzShowSearch>
                <nz-option
                  *ngFor="let option of productTypes"
                  [nzLabel]="option.name"
                  [nzValue]="option.channel_id">
                </nz-option>
              </nz-select>
            </nz-form-control>
            <div class="ml8 pull-left">
              <div class='ant-form-item-explain' class="ml8" *ngIf="getFormControl('channel_id').dirty&&getFormControl('channel_id').hasError('required')"><i nz-icon nzType="exclamation-circle" nzTheme="outline"></i>请选择渠道</div>
            </div>
          </nz-form-item>
        </ng-container>
        <nz-form-item class="account-form-item">
          <div class="form-label pull-left">
            <label><span class="redStart">*</span>媒体:</label>
          </div>
          <nz-form-control class="w260 ml8 pull-left">
            <nz-select class="w100p" [formControlName]="'publisher_id'" [nzDisabled]="account_id>0 || googleSelectVisible" [nzSize]="'default'" [(ngModel)]="accountSetting.publisher_id" (ngModelChange)="publisherChange()" nzShowSearch>
              <nz-option
                *ngFor="let option of publishers"
                [nzLabel]="option.name"
                [nzValue]="option.publisher_id"
                [nzDisabled]="option.publisher_id===20">
              </nz-option>
            </nz-select>
          </nz-form-control>
          <div class="ml8 pull-left">
            <div class='ant-form-item-explain' class="ml8" *ngIf="getFormControl('publisher_id').dirty&&getFormControl('publisher_id').hasError('required')"><i nz-icon nzType="exclamation-circle" nzTheme="outline"></i>请选择媒体</div>
          </div>
        </nz-form-item>

        <ng-container *ngIf="canUseKeeper">
          <nz-form-item class="account-form-item">
            <div class="form-label pull-left">
              <label>使用管家帐号:</label>
            </div>
            <nz-form-control>
              <label class="ml8 w112 inline-block" [formControlName]="'use_keeper'"  nz-checkbox [(ngModel)]="accountSetting.use_keeper" (ngModelChange)="keeperChange()"> </label>
            </nz-form-control>
          </nz-form-item>
          <nz-form-item class="account-form-item" *ngIf="accountSetting.use_keeper">
            <div class="form-label pull-left">
              <label>管家帐号:</label>
            </div>
            <nz-form-control class="w260 ml8 pull-left">
              <nz-select class="w100p" [formControlName]="'super_account_id'"  [nzDisabled]="account_id>0" [nzSize]="'default'" [(ngModel)]="accountSetting.super_account_id" nzShowSearch>
                <ng-container  *ngFor="let option of currentKeeperList">
                  <nz-option
                    [nzLabel]="option.name"
                    [nzValue]="option.key">
                  </nz-option>
                </ng-container>
              </nz-select>
            </nz-form-control>
          </nz-form-item>

        </ng-container>

        <ng-container *ngIf="accountSetting.publisher_id!==6 && accountSetting.publisher_id!==7&& accountSetting.publisher_id!==8 && accountSetting.publisher_id!==9 && accountSetting.publisher_id!==10 && accountSetting.publisher_id!==11 && accountSetting.publisher_id!==13 && accountSetting.publisher_id!==14 && accountSetting.publisher_id!==15 && accountSetting.publisher_id!==16 && accountSetting.publisher_id!==17 && accountSetting.publisher_id!==18 && accountSetting.publisher_id!==19&& accountSetting.publisher_id!==22&& accountSetting.publisher_id!==23">
          <nz-form-item class="account-form-item">
            <div class="form-label pull-left">
              <label><span class="redStart">*</span>推广账户用户名:</label>
            </div>
            <!--{{account_id>0}}-->
            <!--添加-->
            <nz-form-control class="w260 ml8 pull-left" *ngIf="account_id === 0">
              <input nz-input
                     class="w100p"
                     [nzSize]="'default'"
                     [formControlName]="'pub_account_name'"
                     type="text"
                     placeholder="输入用户名"
                     [(ngModel)]="accountSetting.pub_account_name">
            </nz-form-control>
            <!--编辑-->
            <nz-form-control class="w260 ml8 pull-left accountName" *ngIf="account_id > 0">
              <input nz-input
                     class="w100p"
                     [nzSize]="'default'"
                     [formControlName]="'pub_account_name'"
                     type="text"
                     disabled= "disabled"
                     [(ngModel)]="accountSetting.pub_account_name">

            </nz-form-control>
            <div class="ml8 pull-left">
              <div class='ant-form-item-explain' *ngIf="getFormControl('pub_account_name') && getFormControl('pub_account_name').dirty&&getFormControl('pub_account_name').hasError('required')"><i nz-icon nzType="exclamation-circle" nzTheme="outline"></i>请输入用户名</div>
            </div>
          </nz-form-item>
          <ng-container *ngIf="!account_id && !accountSetting.use_keeper">
            <nz-form-item class="account-form-item">
              <div class="form-label pull-left">
                <label><span class="redStart">*</span>推广账户密码:</label>
              </div>
              <nz-form-control class="w260 ml8 pull-left">
                <input nz-input
                       class="w100p"
                       [nzSize]="'default'"
                       [formControlName]="'pub_password'"
                       type="password"
                       placeholder="输入密码"
                       [(ngModel)]="accountSetting.pub_password">

              </nz-form-control>
              <div class="ml8 pull-left">
                <div class='ant-form-item-explain' *ngIf="getFormControl('pub_password').dirty&&getFormControl('pub_password').hasError('required')"><i nz-icon nzType="exclamation-circle" nzTheme="outline"></i>请输入密码</div>
              </div>
            </nz-form-item>
          </ng-container>
        </ng-container>

        <!--小米、VIVO、OPOP、华为-->
        <!--删掉了vivo-->
        <ng-container *ngIf="accountSetting.publisher_id===13 || accountSetting.publisher_id===14  || accountSetting.publisher_id===19">
          <nz-form-item class="account-form-item" *ngIf="accountSetting.publisher_id!==19" >
            <div class="form-label pull-left">
              <label><span class="redStart">*</span>账户名:</label>
            </div>
            <!--{{account_id>0}}-->
            <!--添加-->
            <nz-form-control class="w260 ml8 pull-left" *ngIf="account_id === 0">
              <input nz-input
                     class="w100p"
                     [nzSize]="'default'"
                     [formControlName]="'pub_account_name'"
                     type="text"
                     placeholder="输入账户名"
                     [(ngModel)]="accountSetting.pub_account_name">
            </nz-form-control>
            <!--编辑-->
            <nz-form-control class="w260 ml8 pull-left accountName" *ngIf="account_id > 0">
              <input nz-input
                     class="w100p"
                     [nzSize]="'default'"
                     [formControlName]="'pub_account_name'"
                     type="text"
                     disabled= "disabled"
                     [(ngModel)]="accountSetting.pub_account_name">

            </nz-form-control>
            <div class="ml8 pull-left">
              <div class='ant-form-item-explain' *ngIf="getFormControl('pub_account_name') && getFormControl('pub_account_name').dirty&&getFormControl('pub_account_name').hasError('required')"><i nz-icon nzType="exclamation-circle" nzTheme="outline"></i>请输入账户名</div>
            </div>
          </nz-form-item>
          <nz-form-item class="account-form-item" >
            <div class="form-label pull-left">
              <label><span class="redStart">*</span>账户ID:</label>
            </div>
            <nz-form-control class="w260 ml8 pull-left">
              <input nz-input
                     class="w100p"
                     [nzSize]="'default'"
                     [formControlName]="'owner_id'"
                     type="text"
                     placeholder="输入账户ID"
                     [(ngModel)]="accountSetting.owner_id">
            </nz-form-control>
            <div class="ml8 pull-left">
              <div class='ant-form-item-explain' *ngIf="getFormControl('owner_id').dirty&&getFormControl('owner_id').hasError('required')"><i nz-icon nzType="exclamation-circle" nzTheme="outline"></i>请输入账户ID</div>
            </div>
          </nz-form-item>
          <nz-form-item class="account-form-item">
            <div class="form-label pull-left">
              <label *ngIf="accountSetting.publisher_id===13"><span class="redStart">*</span>Sign Id :</label>
              <label *ngIf="accountSetting.publisher_id===19"><span class="redStart">*</span>客户端ID:</label>
              <label *ngIf="accountSetting.publisher_id!==13 && accountSetting.publisher_id!==19"><span class="redStart">*</span>app_id:</label>
            </div>
            <nz-form-control class="w260 ml8 pull-left">
              <input nz-input
                     class="w100p"
                     [nzSize]="'default'"
                     [formControlName]="'app_id'"
                     type="text"
                     [placeholder]="accountSetting.publisher_id===13 ? '输入Sign Id' :(accountSetting.publisher_id===19 ? '输入客户端ID': '输入app_id')"
                     [(ngModel)]="accountSetting.app_id">
            </nz-form-control>
            <div class="ml8 pull-left">
              <div class='ant-form-item-explain' *ngIf="getFormControl('app_id').dirty&&getFormControl('app_id').hasError('required')"><i nz-icon nzType="exclamation-circle" nzTheme="outline"></i>请输入app_id</div>
            </div>
          </nz-form-item>
          <nz-form-item class="account-form-item">
            <div class="form-label pull-left">
              <label *ngIf="accountSetting.publisher_id===13"><span class="redStart">*</span>Secret Key:</label>
              <label *ngIf="accountSetting.publisher_id===19"><span class="redStart">*</span>客户端密钥:</label>
              <label *ngIf="accountSetting.publisher_id!==13 && accountSetting.publisher_id!==19"><span class="redStart">*</span>app_secret:</label>
            </div>
            <nz-form-control class="w260 ml8 pull-left">
              <input nz-input
                     class="w100p"
                     [nzSize]="'default'"
                     [formControlName]="'app_secret'"
                     type="text"
                     [placeholder]="accountSetting.publisher_id===13 ? '输入Secret Key' : (accountSetting.publisher_id===19 ? '输入客户端密钥': '输入app_secret')"
                     [(ngModel)]="accountSetting.app_secret">
            </nz-form-control>
            <div class="ml8 pull-left">
              <div class='ant-form-item-explain' *ngIf="getFormControl('app_secret').dirty&&getFormControl('app_secret').hasError('required')"><i nz-icon nzType="exclamation-circle" nzTheme="outline"></i>请输入app_secret</div>
            </div>
          </nz-form-item>
        </ng-container>

        <!--快手、360-->
        <nz-form-item class="account-form-item" *ngIf="[3,16].indexOf(accountSetting.publisher_id)!==-1">
          <div class="form-label pull-left">
            <label><span class="redStart">*</span>应用类型 :</label>
          </div>
          <nz-form-control class="w260 ml8 pull-left">
            <nz-radio-group style="display: flex;align-items: center;"  nzSize="default"  [(ngModel)]="accountSetting.is_jzl" [formControlName]="'is_jzl'" (ngModelChange)="jzlTypeChange()">
              <ng-container *ngIf="accountSetting.publisher_id==16">
                <label nz-radio [nzValue]="'1'">{{productInfo['name']}}应用</label>
                <label nz-radio [nzValue]="'2'">自有应用</label>
              </ng-container>
              <ng-container *ngIf="accountSetting.publisher_id==3">
                <label nz-radio [nzValue]="'1'">{{productInfo['name']}}应用</label>
                <label nz-radio [nzValue]="'0'">自有应用</label>
              </ng-container>
            </nz-radio-group>
          </nz-form-control>
        </nz-form-item>
        <ng-container *ngIf="(accountSetting.publisher_id===16 && accountSetting.is_jzl == '2')||(accountSetting.publisher_id===3 && accountSetting.is_jzl == '0')">
          <nz-form-item class="account-form-item">
            <div class="form-label pull-left">
              <label><span class="redStart">*</span>app_id:</label>
            </div>
            <nz-form-control class="w260 ml8 pull-left">
              <input nz-input
                     class="w100p"
                     [nzSize]="'default'"
                     [formControlName]="'app_id'"
                     type="text"
                     placeholder="输入app_id"
                     [(ngModel)]="accountSetting.app_id">
            </nz-form-control>
            <div class="ml8 pull-left">
              <div class='ant-form-item-explain' *ngIf="getFormControl('app_id').dirty&&getFormControl('app_id').hasError('required')"><i nz-icon nzType="exclamation-circle" nzTheme="outline"></i>请输入app_id</div>
            </div>
          </nz-form-item>
          <nz-form-item class="account-form-item">
            <div class="form-label pull-left">
              <label><span class="redStart">*</span>app_secret:</label>
            </div>
            <nz-form-control class="w260 ml8 pull-left">
              <input nz-input
                     class="w100p"
                     [nzSize]="'default'"
                     [formControlName]="'app_secret'"
                     type="text"
                     placeholder="输入app_secret"
                     [(ngModel)]="accountSetting.app_secret">
            </nz-form-control>
            <div class="ml8 pull-left">
              <div class='ant-form-item-explain' *ngIf="getFormControl('app_secret').dirty&&getFormControl('app_secret').hasError('required')"><i nz-icon nzType="exclamation-circle" nzTheme="outline"></i>请输入app_secret</div>
            </div>
          </nz-form-item>
        </ng-container>

        <!--UC-超级汇川-->
        <ng-container *ngIf="accountSetting.publisher_id===17">
          <ng-container *ngIf="!accountSetting.use_keeper">
            <nz-form-item class="account-form-item">
              <div class="form-label pull-left">
                <label><span class="redStart">*</span>应用类型 :</label>
              </div>
              <nz-form-control class="w260 ml8 pull-left">
                <nz-radio-group style="display: flex;align-items: center;"  nzSize="default"  [(ngModel)]="accountSetting.is_jzl" [formControlName]="'is_jzl'" (ngModelChange)="jzlTypeChange()">
                  <label nz-radio [nzValue]="'1'">自有权限</label>
<!--                  <label nz-radio [nzValue]="'2'">第三方权限</label>-->
                </nz-radio-group>
              </nz-form-control>
            </nz-form-item>
          </ng-container>

          <nz-form-item class="account-form-item">
            <div class="form-label pull-left">
              <label><span class="redStart">*</span>推广账户用户名:</label>
            </div>
            <!--{{account_id>0}}-->
            <!--添加-->
            <nz-form-control class="w260 ml8 pull-left" *ngIf="account_id === 0">
              <input nz-input
                     class="w100p"
                     [nzSize]="'default'"
                     [formControlName]="'pub_account_name'"
                     type="text"
                     placeholder="输入用户名"
                     [(ngModel)]="accountSetting.pub_account_name">
            </nz-form-control>
            <!--编辑-->
            <nz-form-control class="w260 ml8 pull-left accountName" *ngIf="account_id > 0">
              <input nz-input
                     class="w100p"
                     [nzSize]="'default'"
                     [formControlName]="'pub_account_name'"
                     type="text"
                     disabled= "disabled"
                     [(ngModel)]="accountSetting.pub_account_name">

            </nz-form-control>
            <div class="ml8 pull-left">
              <div class='ant-form-item-explain' *ngIf="getFormControl('pub_account_name') && getFormControl('pub_account_name').dirty&&getFormControl('pub_account_name').hasError('required')"><i nz-icon nzType="exclamation-circle" nzTheme="outline"></i>请输入账户名</div>
            </div>
          </nz-form-item>
          <ng-container *ngIf="!accountSetting.use_keeper">
            <nz-form-item class="account-form-item">
              <div class="form-label pull-left">
                <label><span class="redStart">*</span>推广账户密码:</label>
              </div>
              <nz-form-control class="w260 ml8 pull-left">
                <input nz-input
                       class="w100p"
                       [nzSize]="'default'"
                       [formControlName]="'pub_password'"
                       type="password"
                       placeholder="输入密码"
                       [(ngModel)]="accountSetting.pub_password">

              </nz-form-control>
              <div class="ml8 pull-left">
                <div class='ant-form-item-explain' *ngIf="getFormControl('pub_password').dirty&&getFormControl('pub_password').hasError('required')"><i nz-icon nzType="exclamation-circle" nzTheme="outline"></i>请输入密码</div>
              </div>
            </nz-form-item>
          </ng-container>
          <ng-container *ngIf="accountSetting.is_jzl == '1'&&!accountSetting.use_keeper">
            <nz-form-item class="account-form-item">
              <div class="form-label pull-left">
                <label><span class="redStart">*</span>api_key:</label>
              </div>
              <nz-form-control class="w260 ml8 pull-left">
                <input nz-input
                       class="w100p"
                       [nzSize]="'default'"
                       [formControlName]="'pub_token'"
                       type="text"
                       placeholder="输入api_key"
                       [(ngModel)]="accountSetting.pub_token">
              </nz-form-control>
              <div class="ml8 pull-left">
                <div class='ant-form-item-explain' *ngIf="getFormControl('pub_token').dirty&&getFormControl('pub_token').hasError('required')"><i nz-icon nzType="exclamation-circle" nzTheme="outline"></i>请输入api_key</div>
              </div>
            </nz-form-item>
          </ng-container>
        </ng-container>
        <!-- <ng-container *ngIf="companyId===33||companyId===1727"> -->
          <nz-form-item class="account-form-item">
            <div class="form-label pull-left">
              <i nz-icon nzType="question-circle" nzTheme="outline"  nz-tooltip [nzTooltipTitle]="'营销分析中显示的渠道名称'" [nzTooltipPlacement]="'topLeft'" class="mr5" style="color: #f09200"></i>
              <label>数据归属渠道:</label>
            </div>
            <nz-form-control class="w260 ml8 pull-left">
              <nz-select class="w100p" [formControlName]="'attribution_channel'" [nzSize]="'default'" [nzDisabled]="accountSetting.publisher_id===7" [(ngModel)]="accountSetting.attribution_channel" nzShowSearch>
                <nz-option
                  *ngFor="let option of allChannels"
                  [nzLabel]="option.channel_name"
                  [nzValue]="option.channel_id">
                </nz-option>
              </nz-select>
            </nz-form-control>
          </nz-form-item>
          <nz-form-item class="account-form-item">
            <div class="form-label pull-left">
              <i nz-icon nzType="question-circle" nzTheme="outline"  nz-tooltip [nzTooltipTitle]="'营销分析中显示的媒体名称'" [nzTooltipPlacement]="'topLeft'" class="mr5" style="color: #f09200"></i>
              <label>数据归属媒体:</label>
            </div>
            <nz-form-control class="w260 ml8 pull-left">
              <nz-select class="w100p" [formControlName]="'attribution_publisher'" [nzSize]="'default'" [(ngModel)]="accountSetting.attribution_publisher" nzShowSearch>
                <nz-option
                  *ngFor="let option of allPublishers"
                  [nzLabel]="option.publisher_name"
                  [nzValue]="option.publisher_id">
                </nz-option>
              </nz-select>
            </nz-form-control>
          </nz-form-item>
        <!-- </ng-container> -->
        <nz-form-item class="account-form-item">
          <div class="form-label pull-left">
            <label>账户标签:</label>
          </div>
          <!--{{chanPubId>0}}-->
          <!--添加-->
          <nz-form-control class="w260 ml8 pull-left" *ngIf="account_id === 0">
            <input nz-input class="w100p" [nzSize]="'default'" [formControlName]="'account_label'" type="text" placeholder="输入账户标签"
                   [(ngModel)]="accountSetting.account_label">
          </nz-form-control>
          <!--编辑-->
          <nz-form-control class="w260 ml8 pull-left accountName" *ngIf="account_id > 0">
            <input nz-input class="w100p" [nzSize]="'default'" [formControlName]="'account_label'" placeholder="输入账户标签" type="text"
                   [(ngModel)]="accountSetting.account_label">
          </nz-form-control>
        </nz-form-item>

        <!-- 账户标签列表 -->
      <nz-form-item class="account-form-item" *ngFor="let item of accountLabelList">
        <div class="form-label pull-left">
          <label>标签-{{item.name}}:</label>
        </div>
        <!--添加-->
        <nz-form-control class="w260 ml8 pull-left" *ngIf="account_id === 0">
          <input nz-input class="w100p" [nzSize]="'default'" [formControlName]="item.key" type="text" placeholder="输入标签"
                 [(ngModel)]="accountSetting['account_custom_label'][item.key]">
        </nz-form-control>
        <!--编辑-->
        <nz-form-control class="w260 ml8 pull-left accountName" *ngIf="account_id > 0">
          <input nz-input class="w100p" [nzSize]="'default'" [formControlName]="item.key" placeholder="输入标签" type="text"
                 [(ngModel)]="accountSetting['account_custom_label'][item.key]">
        </nz-form-control>
      </nz-form-item>

        <nz-form-item class="account-form-item">
          <div class="form-label pull-left">
            <label>账户备注:</label>
          </div>
          <!--添加-->
          <nz-form-control class="w260 ml8 pull-left" *ngIf="account_id === 0">
            <input nz-input class="w100p" [nzSize]="'default'" [formControlName]="'account_comment'" type="text" placeholder="输入账户备注"
                   [(ngModel)]="accountSetting.account_comment">
          </nz-form-control>
          <!--编辑-->
          <nz-form-control class="w260 ml8 pull-left accountName" *ngIf="account_id > 0">
            <input nz-input class="w100p" [nzSize]="'default'" [formControlName]="'account_comment'" placeholder="输入账户备注" type="text"
                   [(ngModel)]="accountSetting.account_comment">
          </nz-form-control>
        </nz-form-item>



        <ng-container *ngIf="accountSetting.publisher_id===2">
          <nz-form-item class="account-form-item">
            <div class="form-label pull-left">
              <label><span *ngIf="accountSetting.publisher_id===2" class="redStart">*</span>显示域名PC端:</label>
            </div>
            <nz-form-control class="w260 ml8 pull-left">
              <input nz-input
                     class="w100p"
                     [nzSize]="'default'"
                     [formControlName]="'display_domain_pc'"
                     type="text"
                     [(ngModel)]="accountSetting.display_domain_pc">

            </nz-form-control>
            <div class="ml8 pull-left">
              <div class='ant-form-item-explain' *ngIf="getFormControl('display_domain_pc').dirty&&getFormControl('display_domain_pc').hasError('required')"><i nz-icon nzType="exclamation-circle" nzTheme="outline"></i>请输入PC端显示域名</div>
            </div>
          </nz-form-item>
        </ng-container>
        <ng-container *ngIf="accountSetting.publisher_id===2">
          <nz-form-item class="account-form-item">
            <div class="form-label pull-left">
              <label><span *ngIf="accountSetting.publisher_id===2" class="redStart">*</span>显示域名WAP端:</label>
            </div>
            <nz-form-control class="w260 ml8 pull-left">
              <input nz-input
                     class="w100p"
                     [nzSize]="'default'"
                     [formControlName]="'display_domain_wap'"
                     type="text"
                     [(ngModel)]="accountSetting.display_domain_wap">

            </nz-form-control>
            <div class="ml8 pull-left">
              <div class='ant-form-item-explain' *ngIf="getFormControl('display_domain_wap').dirty&&getFormControl('display_domain_wap').hasError('required')"><i nz-icon nzType="exclamation-circle" nzTheme="outline"></i>请输入WAP端显示域名</div>
            </div>
          </nz-form-item>
        </ng-container>

        <nz-form-item class="account-form-item" *ngIf="accountSetting.publisher_id===11 && facebookSelectVisible">
          <div class="form-label pull-left">
            <label>选择帐户:</label>
          </div>
          <nz-form-control class="w260 ml8 pull-left">
            <div style="border: 1px solid #d9d9d9; overflow: auto; height: 200px;">
              <nz-input-group [nzSuffix]="suffixIcon">
                <input type="text" nz-input placeholder="Search" [(ngModel)]="searchAccountName" (blur)="changeSearchName()"/>
              </nz-input-group>
              <ng-template #suffixIcon>
                <i nz-icon nzType="search"></i>
              </ng-template>
              <nz-tree
                #nzTreeComponent
                [nzData]="facebookSelectData"
                [nzExpandAll]="true"
                nzCheckable
              >
              </nz-tree>
            </div>

          </nz-form-control>
          <div class="hint ml8 pull-left">
            <i  nz-icon nzType="question-circle" nzTheme="outline" nz-tooltip [nzTooltipTitle]="'注:0代表无返点，20代表返点为20'" [nzTooltipPlacement]="'right'" ></i>
          </div>
          <div class="ml8 pull-left">
            <div class='ant-form-item-explain' *ngIf="getFormControl('discount').dirty&&getFormControl('discount').hasError('required')"><i nz-icon nzType="exclamation-circle" nzTheme="outline"></i>请输入现金返点</div>
            <div class='ant-form-item-explain' style="margin-left: 94px;margin-top: 1px;" *ngIf="getFormControl('discount').dirty&&getFormControl('discount').hasError('error')"><i nz-icon nzType="exclamation-circle" nzTheme="outline"></i>现金返点>=0</div>
          </div>
        </nz-form-item>


        <nz-form-item class="account-form-item">
          <div class="form-label pull-left">
            <span style="color:red">提示:</span>
          </div>
          <nz-form-control class="w260 ml8 pull-left">
            <span style="color:red;">数据对接账户授权完成后需在“URL生成器”页面添加{{productInfo['name']}}追踪码，否则无法追踪转化。</span>
          </nz-form-control>
        </nz-form-item>

        <nz-form-item class="account-form-item" *ngIf="menuService.currentChannelId===1 && [1,4].indexOf(accountSetting.publisher_id)>-1">
          <div class="form-label pull-left">
            <button nz-button [nzType]="'default'" [nzSize]="'default'" (click)="setDomain()">
              <span>域名设置</span>
            </button>
          </div>
          <nz-form-control class="w260 ml8 pull-left">
            <span style="color:#CEC5C5;">非必填项，如果设置不对则会导致刷排名不准，请在运营人员协助下填写</span>
          </nz-form-control>
        </nz-form-item>
        <ng-container *ngIf="(accountSetting.publisher_id===1 || accountSetting.publisher_id ===4) && isShowDomain">
          <nz-form-item class="account-form-item">
            <div class="form-label pull-left">
              <label>竞价域名设置:</label>
            </div>
            <nz-form-control class="w250 ml8 pull-left">
              <nz-radio-group style="display: flex;align-items: center;"  [nzSize]="'default'" [(ngModel)]="accountSetting.rank_type" [formControlName]="'rank_type'">
                <label class="mb2" nz-radio [nzValue]="'click'">
                  <span>使用访问域名</span>
                </label>
                <label nz-radio [nzValue]="'show'">
                  <span>使用显示域名</span>
                </label>
              </nz-radio-group>
            </nz-form-control>
          </nz-form-item>


          <ng-container *ngIf="accountSetting.rank_type=='show'">
            <nz-form-item class="account-form-item" *ngIf="accountSetting.publisher_id===1">
              <div class="form-label pull-left">
                <label>显示域名PC端:</label>
              </div>
              <nz-form-control class="w260 ml8 pull-left">
                <input nz-input
                       class="w100p"
                       [nzSize]="'default'"
                       [formControlName]="'display_domain_pc'"
                       type="text"
                       [(ngModel)]="accountSetting.display_domain_pc">

              </nz-form-control>
            </nz-form-item>
            <nz-form-item class="account-form-item">
              <div class="form-label pull-left">
                <label>显示域名WAP端:</label>
              </div>
              <nz-form-control class="w260 ml8 pull-left">
                <input nz-input
                       class="w100p"
                       [nzSize]="'default'"
                       [formControlName]="'display_domain_wap'"
                       type="text"
                       [(ngModel)]="accountSetting.display_domain_wap">

              </nz-form-control>
            </nz-form-item>
          </ng-container>
          <ng-container *ngIf="accountSetting.rank_type=='click'">
            <nz-form-item class="account-form-item" *ngIf="accountSetting.publisher_id===1">
              <div class="form-label pull-left">
                <label>访问域名PC端:</label>
              </div>
              <nz-form-control class="w260 ml8 pull-left">
                <input nz-input
                       class="w100p"
                       [nzSize]="'default'"
                       [formControlName]="'promo_domain_pc'"
                       type="text"
                       [(ngModel)]="accountSetting.promo_domain_pc">

              </nz-form-control>
            </nz-form-item>
            <nz-form-item class="account-form-item">
              <div class="form-label pull-left">
                <label>访问域名WAP端:</label>
              </div>
              <nz-form-control class="w260 ml8 pull-left">
                <input nz-input
                       class="w100p"
                       [nzSize]="'default'"
                       [formControlName]="'promo_domain_wap'"
                       type="text"
                       [(ngModel)]="accountSetting.promo_domain_wap">

              </nz-form-control>
            </nz-form-item>
          </ng-container>
        </ng-container>


        <div *ngIf="account_id === 0 && !accountSetting.use_keeper">
          <ng-container *ngIf="[1,3,6,7,8,9,10,11,13,14,15,16,17,18,19,22,23,24].indexOf(accountSetting.publisher_id)===-1">
            <nz-form-item class="account-form-item">
              <div class="form-label pull-left">
                <label><span class="redStart">*</span>验证码:</label>
              </div>
              <nz-form-control class="w260 ml8 pull-left">
                <div>
                  <input nz-input
                         class="w100p"
                         [nzSize]="'default'"
                         [formControlName]="'image_token'"
                         type="text"
                         [(ngModel)]="accountSetting.verify_code">

                </div>
              </nz-form-control>
              <div class="ml8 pull-left">
                <div class='ant-form-item-explain' *ngIf="getFormControl('image_token').dirty&&getFormControl('image_token').hasError('required')"><i nz-icon nzType="exclamation-circle" nzTheme="outline"></i>请填写验证码</div>
              </div>
            </nz-form-item>
            <nz-form-item class="account-form-item">
              <div class="form-label pull-left"></div>
              <div class="overHidden ml8">
                <div class="account-image-token pull-left" style="line-height: 38px;">
                  <ng-container *ngIf="!image_loading">
                    <i nz-icon nzType="loading" nzTheme="outline"></i>
                  </ng-container>

                  <ng-container *ngIf="image_loading">
                    <img width="100%" height="100%" src="{{verificationImg}}" alt="验证码">
                  </ng-container>
                </div>
                <div class="pull-left ml5" style="line-height: 40px;">
                  <a (click)="getImage()">换一张</a>
                </div>
              </div>
            </nz-form-item>
          </ng-container>

          <ng-container *ngIf="accountSetting.publisher_id===17 && accountSetting.is_jzl == '2'">
            <nz-form-item class="account-form-item">
              <div class="form-label pull-left">
                <label><span class="redStart">*</span>验证码:</label>
              </div>
              <nz-form-control class="w260 ml8 pull-left">
                <div>
                  <input nz-input
                         class="w100p"
                         [nzSize]="'default'"
                         [formControlName]="'image_token'"
                         type="text"
                         [(ngModel)]="accountSetting.verify_code">

                </div>
              </nz-form-control>
              <div class="ml8 pull-left">
                <div class='ant-form-item-explain' *ngIf="getFormControl('image_token').dirty&&getFormControl('image_token').hasError('required')"><i nz-icon nzType="exclamation-circle" nzTheme="outline"></i>请填写验证码</div>
              </div>
            </nz-form-item>
            <nz-form-item class="account-form-item">
              <div class="form-label pull-left"></div>
              <nz-form-control class="w260 ml8 pull-left">
                <div class="overHidden">
                  <div class="account-image-token pull-left" style="line-height: 38px;">
                    <ng-container *ngIf="!image_loading">
                      <i nz-icon nzType="loading" nzTheme="outline"></i>
                    </ng-container>

                    <ng-container *ngIf="image_loading">
                      <img width="100%" height="100%" src="{{verificationImg}}" alt="验证码">
                    </ng-container>
                  </div>
                  <div class="pull-left ml5" style="line-height: 40px;">
                    <a (click)="getImage()">换一张</a>
                  </div>
                </div>
              </nz-form-control>
            </nz-form-item>
          </ng-container>
        </div>

      </ng-container>

      <ng-container *ngIf="zhihuVisible">
        <nz-form-item class="account-form-item">
          <div class="form-label pull-left">
            <label><span class="redStart">*</span>账户ID:</label>
          </div>
          <nz-form-control class="w260 ml8 pull-left">
            <input nz-input
                   class="w100p"
                   [nzSize]="'default'"
                   [formControlName]="'pub_account_id'"
                   type="text"
                   placeholder="输入账户ID"
                   [(ngModel)]="accountSetting.pub_account_id">
          </nz-form-control>
          <div class="ml8 pull-left">
            <div class='ant-form-item-explain' *ngIf="getFormControl('pub_account_id').dirty&&getFormControl('pub_account_id').hasError('required')"><i nz-icon nzType="exclamation-circle" nzTheme="outline"></i>请输入账户ID</div>
          </div>
        </nz-form-item>
        <nz-form-item class="account-form-item">
          <div class="form-label pull-left">
            <label><span class="redStart">*</span>公司名称:</label>
          </div>
          <nz-form-control class="w260 ml8 pull-left">
            <input nz-input
                   class="w100p"
                   [nzSize]="'default'"
                   [formControlName]="'pub_account_name'"
                   type="text"
                   placeholder="输入公司名称"
                   [(ngModel)]="accountSetting.pub_account_name">
          </nz-form-control>
          <div class="ml8 pull-left">
            <div class='ant-form-item-explain' *ngIf="getFormControl('pub_account_name').dirty&&getFormControl('pub_account_name').hasError('required')"><i nz-icon nzType="exclamation-circle" nzTheme="outline"></i>请输入公司名称</div>
          </div>
        </nz-form-item>
        <nz-form-item class="account-form-item">
          <div class="form-label pull-left">
            <label><span class="redStart">*</span>token:</label>
          </div>
          <nz-form-control class="w260 ml8 pull-left">
            <input nz-input
                   class="w100p"
                   [nzSize]="'default'"
                   [formControlName]="'pub_token'"
                   type="text"
                   placeholder="输入token"
                   [(ngModel)]="accountSetting.pub_token">
          </nz-form-control>
          <div class="ml8 pull-left">
            <div class='ant-form-item-explain' *ngIf="getFormControl('pub_token').dirty&&getFormControl('pub_token').hasError('required')"><i nz-icon nzType="exclamation-circle" nzTheme="outline"></i>请输入token</div>
          </div>
        </nz-form-item>
      </ng-container>


    </div>
    <div class="account-binding-form-footer">
      <button class="ml8" [ngClass]="{'h32': accountSetting.publisher_id === 10 && !isVisible && !googleSelectVisible}" nz-button [nzType]="'default'" [nzSize]="'default'" (click)="cancel()">
        <span>取消</span>
      </button>
      <button class="ml8" [nzLoading]="saveing" nz-button [nzType]="'primary'" [nzSize]="'default'" [disabled]="!validateAccountBindingForm.valid" *ngIf="accountSetting.publisher_id!=7 && accountSetting.publisher_id!=10 && accountSetting.publisher_id!=11 && accountSetting.publisher_id!=16&& accountSetting.publisher_id!=8 && accountSetting.publisher_id!=18&& accountSetting.publisher_id!=22&& accountSetting.publisher_id!=23" (click)="doSave()">
        <span *ngIf="accountSetting.publisher_id!==6 && accountSetting.publisher_id!==9 && accountSetting.publisher_id !==10 && accountSetting.publisher_id !==13 && accountSetting.publisher_id !==14  && accountSetting.publisher_id !==15 && accountSetting.publisher_id !==19">完成</span>
        <span *ngIf="accountSetting.publisher_id===6 || accountSetting.publisher_id===9 || accountSetting.publisher_id ===10 || accountSetting.publisher_id ===13 || accountSetting.publisher_id ===14 || accountSetting.publisher_id ===19">授权</span>
      </button>
      <button class="ml8"  nz-button [nzType]="'primary'" [nzLoading]="saveing" [nzSize]="'default'" *ngIf="accountSetting.publisher_id === 10 && googleSelectVisible" (click)="doSave()">
        <span>完成</span>
      </button>
      <button class="ml8"  nz-button [nzType]="'primary'" [nzLoading]="saveing" [nzSize]="'default'" *ngIf="accountSetting.publisher_id === 11 && facebookSelectVisible" (click)="doSave()">
        <span>完成</span>
      </button>

      <button class="ml8"  nz-button [nzType]="'primary'" [nzLoading]="saveing" [nzSize]="'default'" [disabled]="!validateAccountBindingForm.valid" *ngIf="accountSetting.publisher_id === 18 && zhihuVisible" (click)="createZhihuAccount()">
        <span>完成</span>
      </button>

      <div class="auth-button ml8" *ngIf="accountSetting.publisher_id === 10 && !isVisible && !googleSelectVisible" (click)="grantGoogle()">
        <img src="../../../../assets/google-auth.png" alt="">
      </div>

      <button class="ml8"  nz-button [nzType]="'primary'" [nzSize]="'default'" *ngIf="accountSetting.publisher_id === 11 &&  !facebookVisible  && !facebookSelectVisible" (click)="grantFacebook()">
        <span>授权</span>
      </button>

      <button class="ml8"  nz-button [nzType]="'primary'" [nzSize]="'default'" *ngIf="accountSetting.publisher_id === 7" (click)="grantBytedance()">
        <span>授权</span>
      </button>

      <button class="ml8"  nz-button [nzType]="'primary'" [nzSize]="'default'" *ngIf="accountSetting.publisher_id === 8" [disabled]="!validateAccountBindingForm.valid" (click)="grantWeibo()">
        <span>授权</span>
      </button>

      <button class="ml8"  nz-button [nzType]="'primary'" [nzSize]="'default'" *ngIf="accountSetting.publisher_id === 16" [disabled]="!validateAccountBindingForm.valid" (click)="grantKuaishou()">
        <span>授权</span>
      </button>

      <button class="ml8"  nz-button [nzType]="'primary'" [nzSize]="'default'" *ngIf="accountSetting.publisher_id === 15" [disabled]="!validateAccountBindingForm.valid" (click)="grantVivo()">
        <span>授权</span>
      </button>

      <button class="ml8"  nz-button [nzType]="'primary'" [nzSize]="'default'" *ngIf="accountSetting.publisher_id === 18 && !zhihuVisible" (click)="grantZhihu()">
        <span>授权</span>
      </button>

      <button class="ml8"  nz-button [nzType]="'primary'" [nzSize]="'default'" *ngIf="accountSetting.publisher_id === 22" (click)="grantQianchuan()">
        <span>授权</span>
      </button>

      <button class="ml8"  nz-button [nzType]="'primary'" [nzSize]="'default'" *ngIf="accountSetting.publisher_id === 23" (click)="grantJinniu()">
        <span>授权</span>
      </button>
    </div>
  </form>
  <div class="sem-setting-token-show" *ngIf="isVisible">
      <div class="sem-setting-token-background"></div>
      <div class="sem-setting-token-content">
          <div class="sem-setting-token-title">等待授权完成<i class="fa fa-spinner fa-spin fa-1x ml13"></i></div>
          <div style="margin-top:10px;padding:5px;font-size: 12px;">
              <span>*注：若授权不成功，可能是如下两种原因导致。</span>
              <div style="margin-left:15px;margin-top: 8px;">
                  1、授权系统会弹出另一个页面，您可以检查页面是否被浏览器拦截了或者复制链接进行授权。
              </div>
              <textarea class="form-control" style="margin-left:18px;margin-top: 8px; width: 500px" [rows]="4" [(ngModel)]="gruntUrl"></textarea>
              <div style="margin-left:15px;margin-top:8px;">
                  2、如果对多账户同时进行授权，进入授权页后请先退出上一个账号，然后重新登陆新账号进行授权。
              </div>
              <div style="margin-top:8px;text-align:center;">
                  <button type="button hand" style=" width: 60px;font-size: 12px;" class="btn btn-sm btn-primary btn-top creat-btn sem_btn_small" (click)="cancel()" ng-disabled="!refreshStatusInterval">取消</button>
              </div>
          </div>
      </div>
  </div>
  <div *ngIf="accountSetting.publisher_id===10 &&(googleSelectVisible||googleSelectLoading)">
    <div class="account-binding-form-content" style="width: 500px;">
      <div style="min-height: 200px;" *ngIf="!this.googleSelectLoading">
        <div class="form-label pull-left">
          <label>选择帐户:</label>
        </div>
        <nz-form-control class="w260 ml8 pull-left">
          <div style="border: 1px solid #d9d9d9; overflow: auto; height: 200px;">
            <nz-input-group [nzSuffix]="suffixIcon">
              <input type="text" nz-input placeholder="Search" [(ngModel)]="searchAccountName" (blur)="changeSearchName()"/>
            </nz-input-group>
            <ng-template #suffixIcon>
              <i nz-icon nzType="search"></i>
            </ng-template>
            <nz-tree
              #nzTreeComponent
              [nzData]="googleSelectData"
              [nzExpandAll]="true"
              nzCheckable
            >
            </nz-tree>
          </div>

        </nz-form-control>
      </div>
      <div class="pt30" style="min-height: 200px;text-align: center" *ngIf="this.googleSelectLoading">
        <nz-spin nzSimple nzTip="加载中..."></nz-spin>
      </div>
      <div style="margin-top:20px;text-align:right;">
        <button class="ml8" nz-button [nzType]="'default'" [nzSize]="'default'" (click)="cancel()">
          <span>取消</span>
        </button>
        <button class="ml8"  nz-button [nzType]="'primary'" [nzLoading]="saveing" [nzSize]="'default'" *ngIf="googleSelectVisible" (click)="doSave()">
          <span>完成</span>
        </button>
      </div>
    </div>
  </div>

  <div *ngIf="accountTreeVisible">
    <div class="account-binding-form-content" style="width: 500px;">
      <div style="min-height: 200px;">
        <div class="form-label pull-left">
          <label>选择帐户:</label>
        </div>
        <nz-form-control class="w260 ml8 pull-left">
          <div style="border: 1px solid #d9d9d9; overflow: auto; height: 200px;width: 360px;">
            <nz-input-group [nzSuffix]="suffixIcon">
              <input type="text" nz-input placeholder="搜索多个账户，请用“,”隔开" [(ngModel)]="searchAccountName" (blur)="changeSearchName()"/>
            </nz-input-group>
            <ng-template #suffixIcon>
              <i nz-icon nzType="search"></i>
            </ng-template>
            <nz-tree
              #nzTreeComponent
              [nzData]="selectAccountData"
              (nzCheckBoxChange)="clickAccount($event,selectAccountData)"
              [nzCheckedKeys]="checkedAccount"
              [nzExpandAll]="true"
              nzCheckable
            >
            </nz-tree>
          </div>
        </nz-form-control>
      </div>
      <div style="margin-top:20px;text-align:right;">
        <button class="ml8"  nz-button [nzType]="'default'" [nzSize]="'default'" (click)="cancel()">取消</button>
        <button class="ml8"  nz-button [nzType]="'primary'" [nzSize]="'default'" [nzLoading]="saveing" (click)="bindAccountTree()">确定</button>
      </div>
    </div>

  </div>

<!--  <div class="google-code" *ngIf="googleVisible">-->
<!--    <div class="w300 code-tooltip">-->
<!--      请在您的浏览中登录并向{{productInfo['name']}}授权访问权限，然后将身份验证码粘贴在此处:-->
<!--    </div>-->
<!--    <div class="mt10">-->
<!--      <nz-form-control class="w260 inline-block">-->
<!--        <input nz-input  placeholder="粘贴代码"-->
<!--               [nzSize]="'default'"-->
<!--               [(ngModel)]="googleCode"-->
<!--               type="text"/>-->
<!--      </nz-form-control>-->
<!--      <button class="ml8"  nz-button [nzType]="'primary'" [nzSize]="'default'" [disabled]="googleCode.length<1" (click)="getGoogleAccountTree(googleCode)">确定</button>-->
<!--    </div>-->
<!--  </div>-->
</div>
